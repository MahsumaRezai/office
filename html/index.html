<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ورود و ثبت اطلاعات</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/style.css">

</head>
<body>

<!-- صفحه ورود رمز -->
<div class="login-container" id="loginSection">
    <h2>ورود</h2>
    <label for="password">رمز عبور:</label>
    <input type="password" id="password">
    <button onclick="checkPassword()">ورود</button>
    <p id="errorMessage" class="error-message"></p>
</div>

<!-- فرم اطلاعات کاربر -->
<div class="form-container" id="formSection" style="display:none;">
    <h2>اطلاعات شخصی خود را وارد کنید</h2>
    <form id="personalForm">

        <label for="firstName">نام</label>
        <input type="text" id="firstName" required>

        <label for="lastName">نام خانوادگی</label>
        <input type="text" id="lastName" required>

        <label for="fatherName">نام پدر</label>
        <input type="text" id="fatherName" required>

        <label for="passportNumber">شماره پاسپورت</label>
        <input type="text" id="passportNumber" required>

        <label for="dob">تاریخ تولد</label>
        <input type="date" id="dob" required>

        <label for="passportIssueDate">تاریخ صدور پاسپورت</label>
        <input type="date" id="passportIssueDate" required>

        <label for="expiryDate">تاریخ انقضای پاسپورت</label>
        <input type="date" id="expiryDate" required>

        <label for="phoneNumber">شماره تماس</label>
        <input type="text" id="phoneNumber" required>

        <label for="afghanistanPhoneNumber">شماره تماس افغانستان</label>
        <input type="text" id="afghanistanPhoneNumber">

        <label for="afghanistanAddress">آدرس افغانستان</label>
        <input type="text" id="afghanistanAddress">

        <label for="iranAddress">آدرس ایران</label>
        <input type="text" id="iranAddress">

        <label for="serviceType">نوع خدمات</label>
        <select id="serviceType" required>
            <option value="باخدمات">باخدمات</option>
            <option value="آموزشی">بی خدمات</option>
        </select>

        <label for="gender">جنسیت</label>
        <select id="gender" required>
            <option value="مذکر">مذکر</option>
            <option value="مونث">مونث</option>
        </select>

        <label for="imageUpload">آپلود عکس</label>
        <input type="file" id="imageUpload" accept="image/*" onchange="previewImage(event)">

        <div id="imagePreviewContainer" style="display:none;">
            <h3>پیش‌نمایش تصویر:</h3>
            <img id="imagePreview" src="" alt="Preview" class="uploaded-image">
        </div>

        <button type="button" onclick="displayInfo()">نمایش اطلاعات</button>
        <button type="button" onclick="displayManifest()">ثبت مانیفست</button>
    </form>
</div>

<script>
    const correctPassword = "12345";

    function checkPassword() {
        const input = document.getElementById("password").value;
        if (input === correctPassword) {
            document.getElementById("loginSection").style.display = "none";
            document.getElementById("formSection").style.display = "block";
        } else {
            document.getElementById("errorMessage").textContent = "رمز نادرست است!";
        }
    }

    function getFormData() {
        return {
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            fatherName: document.getElementById('fatherName').value,
            passportNumber: document.getElementById('passportNumber').value,
            dob: document.getElementById('dob').value,
            passportIssueDate: document.getElementById('passportIssueDate').value,
            expiryDate: document.getElementById('expiryDate').value,
            phoneNumber: document.getElementById('phoneNumber').value,
            afghanistanPhoneNumber: document.getElementById('afghanistanPhoneNumber').value,
            afghanistanAddress: document.getElementById('afghanistanAddress').value,
            iranAddress: document.getElementById('iranAddress').value,
            serviceType: document.getElementById('serviceType').value,
            gender: document.getElementById('gender').value,
            image: document.getElementById('imagePreview').src
        };
    }

    function displayInfo() {
        const data = getFormData();
        const style = `
            <style>
                body { font-family: Tahoma, sans-serif; direction: rtl; background: #f4f4f4; padding: 20px; }
                table { width: 100%; border-collapse: collapse; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); border-radius: 10px; overflow: hidden; }
                th, td { padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 14px; }
                th { background-color: #4CAF50; color: white; }
                tr:nth-child(even) { background-color: #f9f9f9; }
                img { max-width: 100px; border-radius: 8px; }
                h2 { color: #333; }
            </style>
        `;
        const content = `
            ${style}
            <h2>اطلاعات وارد شده:</h2>
            <table>
                <tr><th>نام</th><td>${data.firstName}</td></tr>
                <tr><th>نام خانوادگی</th><td>${data.lastName}</td></tr>
                <tr><th>نام پدر</th><td>${data.fatherName}</td></tr>
                <tr><th>شماره پاسپورت</th><td>${data.passportNumber}</td></tr>
                <tr><th>تاریخ تولد</th><td>${data.dob}</td></tr>
                <tr><th>تاریخ صدور پاسپورت</th><td>${data.passportIssueDate}</td></tr>
                <tr><th>تاریخ انقضا</th><td>${data.expiryDate}</td></tr>
                <tr><th>شماره تماس</th><td>${data.phoneNumber}</td></tr>
                <tr><th>تماس افغانستان</th><td>${data.afghanistanPhoneNumber}</td></tr>
                <tr><th>آدرس افغانستان</th><td>${data.afghanistanAddress}</td></tr>
                <tr><th>آدرس ایران</th><td>${data.iranAddress}</td></tr>
                <tr><th>خدمات</th><td>${data.serviceType}</td></tr>
                <tr><th>جنسیت</th><td>${data.gender}</td></tr>
                <tr><th>عکس</th><td><img src="${data.image}" /></td></tr>
            </table>
        `;
        const win = window.open("", "_blank");
        win.document.write(content);
        win.document.title = "اطلاعات شخصی";
    }

    function displayManifest() {
        const data = getFormData();
        const style = `
            <style>
                body { font-family: Tahoma, sans-serif; direction: rtl; background: #f4f4f4; padding: 20px; }
                table { width: 100%; border-collapse: collapse; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); border-radius: 10px; overflow: hidden; }
                th, td { padding: 12px; border: 1px solid #ddd; text-align: center; font-size: 14px; }
                th { background-color: #4CAF50; color: white; }
                tr:nth-child(even) { background-color: #f9f9f9; }
                h2 { color: #333; }
            </style>
        `;
        const content = `
            ${style}
            <h2>مانیفست</h2>
            <table>
                <tr>
                    <th>نام</th>
                    <th>نام خانوادگی</th>
                    <th>شماره پاسپورت</th>
                    <th>تاریخ تولد</th>
                    <th>جنسیت</th>
                </tr>
                <tr>
                    <td>${data.firstName}</td>
                    <td>${data.lastName}</td>
                    <td>${data.passportNumber}</td>
                    <td>${data.dob}</td>
                    <td>${data.gender}</td>
                </tr>
            </table>
        `;
        const win = window.open("", "_blank");
        win.document.write(content);
        win.document.title = "مانیفست";
    }

    function previewImage(event) {
        const reader = new FileReader();
        reader.onload = function () {
            document.getElementById('imagePreview').src = reader.result;
            document.getElementById('imagePreviewContainer').style.display = "block";
        };
        reader.readAsDataURL(event.target.files[0]);
    }
</script>

</body>
</html>
