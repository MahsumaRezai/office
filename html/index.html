<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه اصلی</title>
    <link rel="stylesheet" href="../css/main.css"> <!-- لینک به فایل CSS -->
</head>
<body>
    <div class="form-container">
        <h2>اطلاعات شخصی خود را وارد کنید</h2>
        <form id="personalForm" onsubmit="displayTable(event)">
            
            <label for="firstName">نام</label>
            <input type="text" id="firstName" name="firstName" required>

            <label for="lastName">نام خانوادگی</label>
            <input type="text" id="lastName" name="lastName" required>

            <label for="fatherName">نام پدر</label>
            <input type="text" id="fatherName" name="fatherName" required>


            <label for="passportNumber">شماره پاسپورت</label>
            <input type="text" id="passportNumber" name="passportNumber" required>

            <label for="dob">تاریخ تولد</label>
            <input type="date" id="dob" name="dob" required>

            <label for="passportIssueDate">تاریخ صدور پاسپورت</label>
            <input type="date" id="passportIssueDate" name="passportIssueDate" required>

            <label for="expiryDate">تاریخ انقضای پاسپورت</label>
            <input type="date" id="expiryDate" name="expiryDate" required>

            <label for="phoneNumber">شماره تماس</label>
            <input type="text" id="phoneNumber" name="phoneNumber" required>

            <label for="afghanistanPhoneNumber">شماره تماس افغانستان</label>
            <input type="text" id="afghanistanPhoneNumber" name="afghanistanPhoneNumber">

            <label for="afghanistanAddress">آدرس افغانستان</label>
            <input type="text" id="afghanistanAddress" name="afghanistanAddress">

            <label for="iranAddress">آدرس ایران</label>
            <input type="text" id="iranAddress" name="iranAddress">

            <label for="serviceType">نوع خدمات</label>
            <select id="serviceType" name="serviceType" required>
                <option value="medical">پزشکی</option>
                <option value="educational">آموزشی</option>
                <option value="financial">مالی</option>
                <option value="legal">حقوقی</option>
                <option value="other">دیگر</option>
            </select>

            <label for="gender">جنسیت</label>
            <select id="gender" name="gender" required>
                <option value="male">مذکر</option>
                <option value="female">مونث</option>
            </select>

            <!-- فیلد آپلود عکس -->
            <label for="imageUpload">آپلود عکس</label>
            <input type="file" id="imageUpload" name="imageUpload" accept="image/*" onchange="previewImage(event)">

            <!-- نمایش پیش‌نمایش عکس -->
            <div id="imagePreviewContainer" style="display:none;">
                <h3>پیش‌نمایش تصویر:</h3>
                <img id="imagePreview" src="" alt="Preview" style="max-width: 200px; max-height: 200px;">
            </div>

            <button type="submit">نمایش اطلاعات</button>
        </form>
    </div>

    <script>
        function displayTable(event) {
            event.preventDefault(); // جلوگیری از ارسال فرم به صورت معمول

            // گرفتن مقادیر فرم
            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                fatherName: document.getElementById('fatherName').value,
                familyName: document.getElementById('familyName').value,
                passportNumber: document.getElementById('passportNumber').value,
                dob: document.getElementById('dob').value,
                passportIssueDate: document.getElementById('passportIssueDate').value,
                expiryDate: document.getElementById('expiryDate').value,
                phoneNumber: document.getElementById('phoneNumber').value,
                afghanistanPhoneNumber: document.getElementById('afghanistanPhoneNumber').value,
                afghanistanAddress: document.getElementById('afghanistanAddress').value,
                iranAddress: document.getElementById('iranAddress').value,
                serviceType: document.getElementById('serviceType').value,
                gender: document.getElementById('gender').value,
                image: document.getElementById('imagePreview').src // گرفتن تصویر
            };

            // ساخت HTML برای جدول
            const tableContent = `
                <h2>اطلاعات وارد شده:</h2>
                <table border="1" style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>نام</th>
                            <th>نام خانوادگی</th>
                            <th>نام پدر</th>
                            <th>نام خانوادگی</th>
                            <th>شماره پاسپورت</th>
                            <th>تاریخ تولد</th>
                            <th>تاریخ صدور پاسپورت</th>
                            <th>تاریخ انقضای پاسپورت</th>
                            <th>شماره تماس</th>
                            <th>شماره تماس افغانستان</th>
                            <th>آدرس افغانستان</th>
                            <th>آدرس ایران</th>
                            <th>نوع خدمات</th>
                            <th>جنسیت</th>
                            <th>تصویر</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>${formData.firstName}</td>
                            <td>${formData.lastName}</td>
                            <td>${formData.fatherName}</td>
                            <td>${formData.familyName}</td>
                            <td>${formData.passportNumber}</td>
                            <td>${formData.dob}</td>
                            <td>${formData.passportIssueDate}</td>
                            <td>${formData.expiryDate}</td>
                            <td>${formData.phoneNumber}</td>
                            <td>${formData.afghanistanPhoneNumber}</td>
                            <td>${formData.afghanistanAddress}</td>
                            <td>${formData.iranAddress}</td>
                            <td>${formData.serviceType}</td>
                            <td>${formData.gender}</td>
                            <td><img src="${formData.image}" alt="Uploaded Image" style="max-width: 100px; max-height: 100px;"></td>
                        </tr>
                    </tbody>
                </table>
            `;

            // باز کردن صفحه جدید و نمایش جدول
            const newWindow = window.open();
            newWindow.document.write(tableContent);
            newWindow.document.title = "اطلاعات فرم";
        }

        // نمایش پیش‌نمایش تصویر
        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function() {
                const preview = document.getElementById('imagePreview');
                const imagePreviewContainer = document.getElementById('imagePreviewContainer');
                preview.src = reader.result;
                imagePreviewContainer.style.display = "block"; // نمایش پیش‌نمایش
            };
            reader.readAsDataURL(event.target.files[0]); // خواندن فایل تصویری
        }
    </script>
</body>
</html>
